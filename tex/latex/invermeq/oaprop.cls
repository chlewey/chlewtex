\NeedsTeXFormat{LaTeX2e}
\ProvidesClass{oaprop}
%
% Provisional:
\LoadClassWithOptions{book}
\RequirePackage{oruga}
%
\RequirePackage[pagestyles]{titlesec}
\newpagestyle{main}[\small\color{oaocre}]{%
  \headrule
  \sethead[\textbf{\thepage}]%
          [\chaptertitle]%
          [\oalogo{25pt}]%
          {\oalogo{25pt}}%
          {\sectiontitle}%
          {\textbf{\thepage}}%
}
\newpagestyle{front}[\small\color{oaocre}]{%
  \headrule
  \sethead[\textbf{\thepage}]%
          [\@title]%
          [\oalogo{25pt}]%
          {\oalogo{25pt}}%
          {\@title}%
          {\textbf{\thepage}}%
}
\newpagestyle{partps}[\tiny\color{oaocre}]{%
  \setfoot{}%
          {\thepage}%
          {}%
}
\newpagestyle{chapps}[\small\color{oaocre}]{%
  \footrule
  \setfoot{}%
          {--\thepage--}%
          {}%
}
\titleformat{\part}[display]%
  {\thispagestyle{partps}\Huge\bfseries\filcenter\color{oaocre}}%
  {\oalogo{159pt}\\\partname\ \thepart}%
  {1em}%
  {\hrule}
\titleformat{\chapter}[frame]%
  {\thispagestyle{chapps}\normalfont\bfseries\color{oaocre}\filright}%
  {\oalogo{25pt}\,\chaptertitlename\ \thechapter}%
  {.5em}%
  {\Large}
\titleformat{\section}[hang]%
  {\large\bfseries\color{oaocre}}%
  {Secci√≥n \thesection.}%
  {1ex}%
  {}
\titleformat{\subsection}[runin]%
  {\bfseries\color{oaocre}}%
  {\thesubsection.}%
  {1ex}%
  {}[.\quad]
\titleformat{\subsubsection}[runin]%
  {\small\bfseries\color{oaocre}}%
  {\thesubsubsection}%
  {1ex}%
  {}[.\quad]
\titleformat{\paragraph}[runin]%
  {\small\color{oaocre}}%
  {\thesubsubsection}%
  {1ex}%
  {}[.\quad]
\titleformat{\subparagraph}[runin]%
  {\small\color{oaocre}}%
  {\thesubsubsection}%
  {1ex}%
  {}[.\quad]
%
\let\old@frontmatter\frontmatter
\renewcommand\frontmatter{\old@frontmatter\pagestyle{front}}
\let\old@mainmatter\mainmatter
\renewcommand\mainmatter{\old@mainmatter\pagestyle{main}}
\pagestyle{main}%
%
\renewcommand\maketitle{%
  \begin{titlepage}
  \centering\Large\bfseries~\\
  \vspace{4cm}
  {\huge\@title}\\
  \vspace{4cm}
  \@author\\
  \vspace{\fill}
  \oalogo{318pt}\\
  {\normalsize\color{oaocre}\oamarilla, una marca \invermeq\ e \interlecto}\\
  \@date
  \end{titlepage}}
%
\endinput
